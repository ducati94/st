/** * Dome Siren v1.2.3 * (Model: DMS01) * * Author: * Kevin LaFramboise (krlaframboise) * * URL to documentation: https://community.smartthings.com/t/release-dome-siren-official/75499?u=krlaframboise * * * Changelog: * * 1.2.3 (08/15/2018) * 	- Added support for new mobile app. * * 1.2.2 (12/07/2017) * 	- Fixed beeping during delayed alarm because SmartThings broke something during a recent update. * * 1.2.1 (12/02/2017) * 	- Fixed bug with siren play until depleted setting. * * 1.2 (10/12/2017) * 	- SmartThings broke the ability to set a state value to null which prevented the resetting of sirenStartTime. * * 1.1.6 (04/27/2017) * 	- Bug fix for siren not turning on. * * 1.1.5 (04/23/2017) * 	- SmartThings broke parse method response handling so switched to sendhubaction. * 	- Bug fix for location timezone issue. * * 1.1.4 (03/21/2017) * 	- Fix for SmartThings TTS url changing. * * 1.1.3 (03/11/2017) * - Cleaned code for publication. * * 1.1.2 (03/09/2017) * - Added health check and switch capabilities. * - Added self polling functionality. * - Removed polling capability. * * 1.0 (01/25/2017) * - Initial Release * * * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except * in compliance with the License. You may obtain a copy of the License at: * * http://www.apache.org/licenses/LICENSE-2.0 * * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed * on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License * for the specific language governing permissions and limitations under the License. * */metadata {	definition (		name: "Dome Siren", 		namespace: "krlaframboise", 		author: "Kevin LaFramboise",		vid: "generic-siren"	) {		capability "Actuator"		capability "Alarm"		capability "Battery"		capability "Configuration"		capability "Refresh"		capability "Tone"		capability "Speech Synthesis"		capability "Audio Notification"		capability "Music Player"		capability "Switch"		capability "Health Check"				attribute "lastCheckin", "string"		attribute "status", "enum", ["alarm", "pending", "off", "chime"]				// Required for Speaker notify with sound		command "playSoundAndTrack"		command "playTrackAtVolume"		 		command "on"		command "bell1"		command "bell2"		command "bell3"		command "bell4"		command "bell5"		command "chime1"		command "chime2"		command "chime3"		command "siren1"		command "siren2"				fingerprint deviceId: "0x1005", inClusters: "0x25, 0x59, 0x5A, 0x5E, 0x70, 0x71, 0x72, 0x73, 0x80, 0x85, 0x86, 0x87"				fingerprint mfr:"021F", prod:"0003", model:"0088"	}		simulator { }		preferences {		input "sirenSound", "enum",			title: "Alarm Sound:",			displayDuringSetup: true,			required: false,			defaultValue: sirenSoundSetting,			options: sirenSoundOptions.collect { it.name }		input "sirenVolume", "enum",			title: "Alarm Volume:",			required: false,			defaultValue: sirenVolumeSetting,						displayDuringSetup: true,			options: sirenVolumeOptions.collect { it.name }		input "sirenLength", "enum",			title: "Alarm Duration:",			defaultValue: sirenLengthSetting,			required: false,			displayDuringSetup: true,			options: sirenLengthOptions.collect { it.name }		input "sirenLED", "enum",			title: "Alarm LED:",			defaultValue: sirenLEDSetting,			required: false,			displayDuringSetup: true,			options: ledOptions.collect { it.name }		input "sirenDelay", "enum",

